<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>D-Day 도넛 차트</title>
  <style>
    body {
      margin: 0;
      background: transparent;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .label {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 16px;
    }

    .donut-chart {
      width: 200px;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      position: relative;
      background: conic-gradient(#4caf50 0deg, #e0e0e0 0deg 360deg);
    }

    .donut-chart::before {
      content: "";
      position: absolute;
      inset: 15%;
      border-radius: 50%;
      z-index: 1;
    }

    .donut-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      z-index: 2;
    }

    /* 다크 모드 및 라이트 모드 대응 */
    @media (prefers-color-scheme: dark) {
      .donut-chart::before {
        background: #111; /* 다크모드 중앙 배경 */
      }
      .donut-text,
      .label {
        color: #ffffff;
      }
      .donut-chart {
        background: conic-gradient(#4caf50 0deg, #444 0deg 360deg);
      }
    }

    @media (prefers-color-scheme: light) {
      .donut-chart::before {
        background: #ffffff; /* 라이트모드 중앙 배경 */
      }
      .donut-text,
      .label {
        color: #000000;
      }
      .donut-chart {
        background: conic-gradient(#4caf50 0deg, #e0e0e0 0deg 360deg);
      }
    }
  </style>
</head>
<body>
  <div class="label">노무사 2차 시험까지</div>
  <div class="donut-chart" id="chart">
    <div class="donut-text" id="text">D-?</div>
  </div>

  <script>
    const chart = document.getElementById("chart");
    const text = document.getElementById("text");

    const start = new Date("2025-07-10");
    const end = new Date("2025-08-30");
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);  // ✅ 오늘 날짜를 0시 기준으로 고정

    const totalDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
    const remainingDays = Math.max(0, Math.floor((end - today) / (1000 * 60 * 60 * 24)));

    const progressPercent = ((totalDays - remainingDays) / totalDays);
    const progressDegrees = progressPercent * 360;

    chart.style.background = `conic-gradient(#4caf50 ${progressDegrees}deg, #e0e0e0 0deg 360deg)`;
    text.textContent = `D-${remainingDays}`;
  </script>
</body>
</html>
